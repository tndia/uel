<!-- header_custom.html â€” extensÃ£o do header (Just the Docs) -->
<div class="uel-topbar" role="navigation" aria-label="Links rÃ¡pidos">
  <div class="uel-topbar__links">
    <a class="uel-pill" href="{{ "/app/" | relative_url }}">ğŸ§­ <span>Abrir o app</span></a>
    <a class="uel-pill" href="{{ "/docs/" | relative_url }}">ğŸ“š <span>DocumentaÃ§Ã£o</span></a>
    <a class="uel-pill" href="{{ "/reference/" | relative_url }}">ğŸ§© <span>ReferÃªncia</span></a>
    <a class="uel-pill" href="{{ "/downloads/" | relative_url }}">â¬‡ï¸ <span>Downloads</span></a>
  </div>

  <div class="uel-topbar__actions">
    <button id="uel-theme-toggle" class="uel-btn" type="button" aria-label="Alternar tema" aria-pressed="true">ğŸŒ™ Escuro</button>
    {% if site.github.repository_url %}
      <a class="uel-btn" href="{{ site.github.repository_url }}" aria-label="RepositÃ³rio no GitHub">GitHub</a>
    {% endif %}
  </div>
</div>

<script>
  (function () {
    var btn = document.getElementById('uel-theme-toggle');
    if (!btn) return;

    var DARK = 'uel_dark';
    var LIGHT = 'uel_light';

    function getTheme() {
      return localStorage.getItem('jtd-theme') || '{{ site.color_scheme }}';
    }

    function setLabel(theme) {
      var isDark = theme === DARK;
      btn.setAttribute('aria-pressed', isDark ? 'true' : 'false');
      btn.textContent = isDark ? 'ğŸŒ™ Escuro' : 'â˜€ï¸ Claro';
    }

    function setTheme(theme) {
      if (window.jtd && typeof window.jtd.setTheme === 'function') {
        window.jtd.setTheme(theme);
      } else {
        // fallback: ainda grava a preferÃªncia; o tema aplica no prÃ³ximo load
        localStorage.setItem('jtd-theme', theme);
      }
      setLabel(theme);
    }

    // Primeiro load: se o usuÃ¡rio nunca escolheu, respeita o sistema.
    if (!localStorage.getItem('jtd-theme')) {
      var prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      setTheme(prefersDark ? DARK : LIGHT);
    } else {
      setLabel(getTheme());
    }

    btn.addEventListener('click', function () {
      var next = (getTheme() === DARK) ? LIGHT : DARK;
      setTheme(next);
    });
  })();
</script>
